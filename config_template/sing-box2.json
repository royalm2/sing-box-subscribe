{
  "log": {
    "level": "warn",
    "output": "box.log",
    "timestamp": true
  },
  "dns": {
    "servers": [
      {
        "type": "h3",
        "tag": "dns_proxy",
        "detour": "PROXY_DNS",
        "domain_resolver": "dns_resolver",
        "server": "cloudflare-dns.com"
      },
      {
        "type": "h3",
        "tag": "dns_direct",
        "domain_resolver": "dns_resolver",
        "server": "dns.alidns.com"
      },
      {
        "type": "local",
        "tag": "dns_resolver"
      }
    ],
    "rules": [
      {
        "clash_mode": "Direct",
        "server": "dns_direct"
      },
      {
        "clash_mode": "Global",
        "server": "dns_proxy"
      },
      {
        "rule_set": [
          "geosite-category-ads-all",
          "geosite-openai@ads"
        ],
        "action": "reject"
      },
      {
        "domain_suffix": [
          "69shuba.cx",
          "69shuba.me",
          "69yuedu.net",
          "69shuba.com",
          "twkan.com",
          "101kan.com",
          "101kanshu.com",
          "69shux.co"
        ],
        "server": "dns_proxy"
      },
      {
        "rule_set": "geosite-geolocation-cn",
        "server": "dns_direct"
      },
      {
        "type": "logical",
        "mode": "and",
        "rules": [
          {
            "rule_set": "geosite-geolocation-!cn",
            "invert": true
          },
          {
            "rule_set": "geoip-cn"
          }
        ],
        "server": "dns_proxy"
      }
    ],
    "strategy": "prefer_ipv6",
    "independent_cache": true,
    "client_subnet": "211.138.16.0/20"
  },
  "ntp": {
    "enabled": true,
    "interval": "30m0s",
    "server": "time.apple.com",
    "server_port": 123
  },
  "inbounds": [
    {
      "type": "mixed",
      "tag": "mixed-in",
      "listen": "127.0.0.1",
      "listen_port": 2080
    },
    {
      "type": "tun",
      "tag": "tun-in",
      "address": [
        "172.18.0.1/30",
        "fdfe:dcba:9876::1/126"
      ],
      "auto_route": true,
      "strict_route": true,
      "stack": "system",
      "include_package": [
        "cn.mujiankeji.mbrowser",
        "com.android.vending",
        "com.brave.browser",
        "com.google.android.apps.authenticator2",
        "com.google.android.configupdater",
        "com.google.android.gm",
        "com.google.android.gms",
        "com.google.android.gsf",
        "com.termux",
        "com.termux.styling",
        "dev.anilbeesetti.nextplayer",
        "io.legado.app.release",
        "io.legado.app.releaseA",
        "org.telegram.messenger"
      ],
      "exclude_package": [
        "android",
        "android.ext.services",
        "androidhwext",
        "cn.toside.music.mobile",
        "cn.wps.moffice_eng",
        "com.android.apps.tag",
        "com.android.backupconfirm",
        "com.android.bluetooth",
        "com.android.bluetoothmidiservice",
        "com.android.calendar",
        "com.android.calllogbackup",
        "com.android.captiveportallogin",
        "com.android.carrierconfig",
        "com.android.cellbroadcastreceiver",
        "com.android.certinstaller",
        "com.android.companiondevicemanager",
        "com.android.contacts",
        "com.android.cts.ctsshim",
        "com.android.cts.priv.ctsshim",
        "com.android.deskclock",
        "com.android.documentsui",
        "com.android.dreams.basic",
        "com.android.dreams.phototable",
        "com.android.email",
        "com.android.emergency",
        "com.android.externalstorage",
        "com.android.frameworkres.overlay",
        "com.android.gallery3d",
        "com.android.htmlviewer",
        "com.android.incallui",
        "com.android.inputdevices",
        "com.android.internal.systemui.navbar.gestural",
        "com.android.keychain",
        "com.android.localtransport",
        "com.android.location.fused",
        "com.android.managedprovisioning",
        "com.android.mediacenter",
        "com.android.mms",
        "com.android.mms.service",
        "com.android.modulemetadata",
        "com.android.mtp",
        "com.android.networkstack.inprocess",
        "com.android.networkstack.permissionconfig",
        "com.android.nfc",
        "com.android.ons",
        "com.android.packageinstaller",
        "com.android.pacprocessor",
        "com.android.permissioncontroller",
        "com.android.phone",
        "com.android.printspooler",
        "com.android.providers.blockednumber",
        "com.android.providers.calendar",
        "com.android.providers.contacts",
        "com.android.providers.downloads",
        "com.android.providers.downloads.ui",
        "com.android.providers.media",
        "com.android.providers.settings",
        "com.android.providers.telephony",
        "com.android.providers.userdictionary",
        "com.android.proxyhandler",
        "com.android.se",
        "com.android.server.telecom",
        "com.android.settings",
        "com.android.sharedstoragebackup",
        "com.android.shell",
        "com.android.simappdialog",
        "com.android.soundrecorder",
        "com.android.statementservice",
        "com.android.stk",
        "com.android.storagemanager",
        "com.android.systemui",
        "com.android.systemui.overlay",
        "com.android.vpndialogs",
        "com.android.wallpaper.livepicker",
        "com.android.wallpaperbackup",
        "com.android.wallpapercropper",
        "com.baidu.BaiduMap",
        "com.baidu.input_huawei",
        "com.cardgame.collection.fishdom",
        "com.deepseek.chat",
        "com.ea.game.pvzfree_row",
        "com.example.android.notepad",
        "com.google.android.ext.shared",
        "com.google.android.marvin.talkback",
        "com.google.android.printservice.recommendation",
        "com.google.android.webview",
        "com.google.ar.core",
        "com.greenpoint.android.mc10086.activity",
        "com.hicloud.android.clone",
        "com.huawei.HwMultiScreenShot",
        "com.huawei.airlink",
        "com.huawei.android.AutoRegSms",
        "com.huawei.android.FMRadio",
        "com.huawei.android.FloatTasks",
        "com.huawei.android.UEInfoCheck",
        "com.huawei.android.airsharing",
        "com.huawei.android.chr",
        "com.huawei.android.findmyphone",
        "com.huawei.android.hsf",
        "com.huawei.android.hwaps",
        "com.huawei.android.hwouc",
        "com.huawei.android.hwupgradeguide",
        "com.huawei.android.instantonline",
        "com.huawei.android.instantshare",
        "com.huawei.android.internal.app",
        "com.huawei.android.karaoke",
        "com.huawei.android.launcher",
        "com.huawei.android.projectmenu",
        "com.huawei.android.pushagent",
        "com.huawei.android.remotecontroller",
        "com.huawei.android.thememanager",
        "com.huawei.android.totemweather",
        "com.huawei.android.wfdft",
        "com.huawei.appmarket",
        "com.huawei.ar.measure",
        "com.huawei.arengine.service",
        "com.huawei.assetsync",
        "com.huawei.assetsyncservice",
        "com.huawei.audioaccessorymanager",
        "com.huawei.behaviorauth",
        "com.huawei.bluetooth",
        "com.huawei.bonevoiceui",
        "com.huawei.browser",
        "com.huawei.ca",
        "com.huawei.calculator",
        "com.huawei.camera",
        "com.huawei.camerakit.impl",
        "com.huawei.cloud",
        "com.huawei.coauthservice",
        "com.huawei.compass",
        "com.huawei.contacts.sync",
        "com.huawei.contactscamcard",
        "com.huawei.contentsensor",
        "com.huawei.controlcenter",
        "com.huawei.def",
        "com.huawei.desktop.explorer",
        "com.huawei.desktop.systemui",
        "com.huawei.deviceauth",
        "com.huawei.devicegroupmanage",
        "com.huawei.devicemanager",
        "com.huawei.distributed.kms",
        "com.huawei.dmsdp",
        "com.huawei.dsdscardmanager",
        "com.huawei.easygo",
        "com.huawei.fastapp",
        "com.huawei.featurelayer.featureframework",
        "com.huawei.featurelayer.sharedfeature.map",
        "com.huawei.fido.uafclient",
        "com.huawei.filemanager",
        "com.huawei.harmonyos.foundation",
        "com.huawei.hbm",
        "com.huawei.health",
        "com.huawei.hff",
        "com.huawei.hiaction",
        "com.huawei.hiai",
        "com.huawei.hicar",
        "com.huawei.hicard",
        "com.huawei.hicloud",
        "com.huawei.hidisk",
        "com.huawei.hilink.framework",
        "com.huawei.himovie",
        "com.huawei.himovie.partner1",
        "com.huawei.himovie.partner2",
        "com.huawei.hiskytone",
        "com.huawei.hitouch",
        "com.huawei.hiview",
        "com.huawei.hiviewtunnel",
        "com.huawei.hms.dupdateengine",
        "com.huawei.hwasm",
        "com.huawei.hwblockchain",
        "com.huawei.hwddmp",
        "com.huawei.hwdetectrepair",
        "com.huawei.hwdiagnosis",
        "com.huawei.hwdockbar",
        "com.huawei.hwid",
        "com.huawei.hwireader",
        "com.huawei.hwpanpayservice",
        "com.huawei.hwstartupguide",
        "com.huawei.hwvoipservice",
        "com.huawei.hwvplayer.youku",
        "com.huawei.iaware",
        "com.huawei.iconnect",
        "com.huawei.imedia.dolby",
        "com.huawei.imedia.sws",
        "com.huawei.ims",
        "com.huawei.intelligent",
        "com.huawei.languagedownloader",
        "com.huawei.lbs",
        "com.huawei.livewallpaper.matetwenty",
        "com.huawei.localBackup",
        "com.huawei.magazine",
        "com.huawei.mediacontroller",
        "com.huawei.mirror",
        "com.huawei.mmitest",
        "com.huawei.motionservice",
        "com.huawei.msdp",
        "com.huawei.multimedia.audioengine",
        "com.huawei.multimedia.hivideoplayengine",
        "com.huawei.nb.service",
        "com.huawei.nearby",
        "com.huawei.numberidentity",
        "com.huawei.ohos.camera",
        "com.huawei.ohos.famanager",
        "com.huawei.ohos.health",
        "com.huawei.ohos.hiwindow",
        "com.huawei.ohos.photos",
        "com.huawei.ohos.search",
        "com.huawei.ohos.smarthome",
        "com.huawei.ohos.suggestion",
        "com.huawei.onehopsvcclient",
        "com.huawei.onehopsvchost",
        "com.huawei.parentcontrol",
        "com.huawei.pcassistant",
        "com.huawei.pengine",
        "com.huawei.phone.recorder",
        "com.huawei.phoneservice",
        "com.huawei.powergenie",
        "com.huawei.printservice",
        "com.huawei.privatespace",
        "com.huawei.profile",
        "com.huawei.rcsserviceapplication",
        "com.huawei.recsys",
        "com.huawei.regservice",
        "com.huawei.remotepassword",
        "com.huawei.scanner",
        "com.huawei.scenepack",
        "com.huawei.screenrecorder",
        "com.huawei.search",
        "com.huawei.searchservice",
        "com.huawei.secime",
        "com.huawei.securitymgr",
        "com.huawei.securitypluginbase",
        "com.huawei.securityserver",
        "com.huawei.skytone",
        "com.huawei.smarthome",
        "com.huawei.smartshot",
        "com.huawei.spaceservice",
        "com.huawei.suggestion",
        "com.huawei.synergy",
        "com.huawei.systemmanager",
        "com.huawei.systemserver",
        "com.huawei.tips",
        "com.huawei.trustagent",
        "com.huawei.trustcircle",
        "com.huawei.trustedthingsauth",
        "com.huawei.trustspace",
        "com.huawei.vassistant",
        "com.huawei.videoeditor",
        "com.huawei.vrservice",
        "com.huawei.wallet",
        "com.huawei.wallet.sdk.walletsdk",
        "com.huawei.waudio",
        "com.huawei.webview",
        "com.huawei.wifiprobqeservice",
        "com.iflytek.speechsuite",
        "com.microsoft.translator",
        "com.osfans.trime",
        "com.recax.mjclub",
        "com.sina.weibo",
        "com.sohu.sohuvideo.emplayer",
        "com.ss.android.ugc.aweme",
        "com.tencent.mm",
        "com.tencent.qqlivehuawei",
        "com.tencent.tim",
        "com.unionpay",
        "com.unionpay.tsmservice",
        "com.v2ray.ang",
        "idm.internet.download.manager.plus",
        "in.mfile",
        "is.xyz.mpv",
        "mark.via.gp",
        "me.gfuil.bmap",
        "net.weweweb.android.skydog.free",
        "ohos.media.medialibrary"
      ],
      "platform": {
        "http_proxy": {
          "enabled": true,
          "server": "127.0.0.1",
          "server_port": 2080
        }
      }
    }
  ],
  "outbounds": [
    {
      "type": "direct",
      "tag": "DIRECT"
    },
    {
      "type": "selector",
      "tag": "PROXY",
      "outbounds": [
        "DIRECT",
        "♻️ 自动选择",
        "GLITCH",
        "{all}"
      ],
      "default": "♻️ 自动选择"
    },
    {
      "type": "selector",
      "tag": "PROXY_DNS",
      "outbounds": [
        "GLITCH",
        "♻️ 自动选择",
        "{all}"
      ]
    },
    {
      "type": "selector",
      "tag": "📲 69shuba",
      "outbounds": [
        "GLITCH",
        "♻️ 自动选择",
        "{all}"
      ]
    },
    {
      "type": "urltest",
      "tag": "♻️ 自动选择",
      "outbounds": [
        "{all}"
      ],
      "filter":[
        {"action":"exclude","keywords":["glitch|Glitch"]}
      ],
      "url": "http://www.gstatic.com/generate_204",
      "interval": "5m0s",
      "tolerance": 50
    },
    {
      "type": "selector",
      "tag": "📲 github",
      "outbounds": [
        "GLITCH",
        "♻️ 自动选择",
        "{all}"
      ]
    },
    {
      "type": "selector",
      "tag": "📲 电报信息",
      "outbounds": [
        "PROXY",
        "{all}"
      ]
    },
    {
      "type": "selector",
      "tag": "🤖 ChatGPT",
      "outbounds": [
        "PROXY",
        "{all}"
      ]
    },
    {
      "type": "urltest",
      "tag": "GLITCH",
      "outbounds": [
        "{all}"
      ],
      "filter":[
        {"action":"include","keywords":["glitch|Glitch"]}
      ],
      "url": "http://www.gstatic.com/generate_204",
      "interval": "5m0s",
      "tolerance": 50
    }
  ],
  "route": {
    "rules": [
      {
        "inbound": "mixed-in",
        "action": "resolve"
      },
      {
        "action": "sniff"
      },
      {
        "protocol": "dns",
        "action": "hijack-dns"
      },
      {
        "protocol": "bittorrent",
        "outbound": "DIRECT"
      },
      {
        "ip_is_private": true,
        "outbound": "DIRECT"
      },
      {
        "clash_mode": "Direct",
        "outbound": "DIRECT"
      },
      {
        "clash_mode": "Global",
        "outbound": "PROXY"
      },
      {
        "rule_set": [
          "geosite-category-ads-all",
          "geosite-openai@ads"
        ],
        "action": "reject"
      },
      {
        "domain": "services.googleapis.cn",
        "outbound": "PROXY"
      },
      {
        "rule_set": [
          "geosite-geolocation-cn",
          "geosite-microsoft@cn",
          "geosite-private",
          "geosite-cn",
          "geoip-cn"
        ],
        "outbound": "DIRECT"
      },
      {
      "domain_suffix": [
        "69shuba.cx",
        "69shuba.me",
        "69yuedu.net",
        "69shuba.com",
        "twkan.com",
        "101kan.com",
        "101kanshu.com",
        "69shux.co"
      ],
      "outbound": "📲 69shuba"
      },
      {
        "rule_set": [
          "geosite-github"
        ],
        "outbound": "📲 github"
      },
      {
        "rule_set": [
          "geosite-telegram",
          "geoip-telegram"
        ],
        "outbound": "📲 电报信息"
      },
      {
        "rule_set": "geosite-openai",
        "outbound": "🤖 ChatGPT"
      }
    ],
    "rule_set": [
      {
        "type": "remote",
        "tag": "geosite-github",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-github.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-category-ads-all",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-ads-all.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-geolocation-!cn",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-geolocation-!cn.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-geolocation-cn",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-geolocation-cn.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-openai@ads",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-openai@ads.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-microsoft@cn",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-microsoft@cn.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geoip-cloudflare",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/nekolsd/geoip/refs/heads/release/srs/cloudflare.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geoip-telegram",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-telegram",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-telegram.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-openai",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-openai.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-private",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-private.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geosite-cn",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-cn.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      },
      {
        "type": "remote",
        "tag": "geoip-cn",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-cn.srs",
        "download_detour": "PROXY",
        "update_interval": "24h0m0s"
      }
    ],
    "final": "PROXY",
    "auto_detect_interface": true,
    "override_android_vpn": true,
    "default_domain_resolver": "dns_resolver"
  },
  "experimental": {
    "cache_file": {
      "enabled": true,
      "store_rdrc": true
    },
    "clash_api": {
      "external_controller": "127.0.0.1:9090",
      "external_ui": "ui",
      "external_ui_download_url": "https://github.com/Zephyruso/zashboard/archive/gh-pages.zip",
      "external_ui_download_detour": "PROXY",
      "default_mode": "Enhanced"
    }
  }
}
